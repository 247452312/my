<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>登录</title>
    <link rel="stylesheet" href="/css/my.css">
    <link rel="stylesheet" href="/layuimini/lib/layui-v2.5.5/css/modules/layer/default/layer.css">
    <script src="/js/jquery.min.js"></script>
    <script src="/layuimini/lib/layui-v2.5.5/lay/modules/layer.js"></script>
    <script src="/js/my.js"></script>
    <link rel="stylesheet" href="/css/login.css">
    <script>
        $.fn.serializeObject = function () {
            var o = {};
            var a = this.serializeArray();
            $.each(a, function () {
                if (o[this.name]) {
                    if (!o[this.name].push) {
                        o[this.name] = [o[this.name]];
                    }
                    o[this.name].push(this.value || '');
                } else {
                    o[this.name] = this.value || '';
                }
            });
            return o;
        };

        function login() {
            let a = $(".login-submit-target").serializeObject();
            arg = {};
            arg.username = a.username;
            arg.password = a.password;
            pushRequest("UserService", "userLoginNoToken", arg, function (data) {
                    setCookie("token", data.token, 1);
                    setAttrBySession("userInfo", data.userEntity);
                    setAttrBySession("token", {token: data.token});
                    window.location.href = "/layuimini/index.html";
            });

        }
    </script>
</head>
<body>
<div class="login-background">
    <div class="login-middle">
        <div class="login-middle-top-logo">
            <img src="/pic/logo.gif" alt>
        </div>
        <div class="login-middle-top-title">my框架 v 0.0.1</div>
        <div class="login-middle-login-border">
            <!-- 登录框↓↓↓  -->
            <form class="login-form login-submit-target" onsubmit="return false;">
                <div class="login-form-line">
                    <input type="text" name="username" autocomplete="off" placeholder="请输入用户名">
                    <span class="input-prefix-username">
                        <img class="input-prefix-username-icon" src="/pic/login_username.svg"/>
                    </span>

                </div>
                <div class="login-form-line">
                    <input type="password" name="password" autocomplete="off" placeholder="请输入密码">
                    <span class="input-suffix-username">
                        <img class="input-suffix-username-icon" src="/pic/login_password.svg"/>
                    </span>
                </div>
                <div class="login-form-line">
                    <button class="button login-submit-button" onclick="login()">登录</button>
                </div>
            </form>
            <!-- 登录框↑↑↑  -->

        </div>
    </div>

</div>
<script>
    $(document).ready(function () {
        $(".login-middle").animate({
            left: '100px',
            opacity: 1
        }, 500); // 登录框弹出
    });
</script>
</body>
</html>
